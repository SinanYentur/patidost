#!/bin/sh
# ANAYASAL KAPI: COMMIT-MSG
# Bu script, her commit mesajÄ±nÄ±n Conventional Commits formatÄ±na uymasÄ±nÄ± zorunlu kÄ±lar.

COMMIT_MSG_FILE=$1
COMMIT_MSG=$(cat $COMMIT_MSG_FILE)

# Regex for Conventional Commits: type(scope): subject
CONVENTIONAL_COMMIT_REGEX="^(feat|fix|build|chore|ci|docs|perf|refactor|revert|style|test)(\([a-zA-Z0-9\s\-]+\))?!?: .+"

if ! echo "$COMMIT_MSG" | grep -qE "$CONVENTIONAL_COMMIT_REGEX"; then
    echo "[DENETÃ‡Ä°] ðŸš¨ ANAYASAL Ä°HLAL: Commit mesajÄ± Conventional Commits formatÄ±na uymuyor." >&2
    echo "[DENETÃ‡Ä°] LÃ¼tfen 'feat(login): Add email validation' gibi bir format kullanÄ±n." >&2
    exit 1
fi

exit 0
