#!/bin/bash
# ANKARA-OS v8.0 PRE-COMMIT HOOK
# Bu dosya Anayasa'nÄ±n fiziksel koruyucusudur.

echo "ğŸ”’ ANKARA-OS v8.0 DENETÃ‡Ä°SÄ° DEVREDE..."

# KURAL 1: Anayasa Versiyon KontrolÃ¼
if ! grep -q "VERSION: 8.0" docs/CORE_CONSTITUTION.md; then
    echo "âŒ HATA: Anayasa versiyonu (v8.0) doÄŸrulanamadÄ± veya dosya bozuk."
    exit 1
fi

# KURAL 2: Mimari Onay KontrolÃ¼
if ! grep -q "Ä°NSAN ONAYI:" docs/ARCHITECTURE_LOG.md; then
    echo "âŒ HATA: Mimari kararlar (docs/ARCHITECTURE_LOG.md) Ä°nsan tarafÄ±ndan onaylanmamÄ±ÅŸ."
    exit 1
fi

# KURAL 3: Hardcoded Secret TaramasÄ± (Basit)
# "password", "api_key" gibi kelimeleri kaynak kodda arar.
if grep -rE "password\s*=|api_key\s*=|private_key\s*=" app/src/main/java; then
    echo "âŒ HATA: Kod iÃ§inde hardcoded secret (ÅŸifre/anahtar) tespit edildi."
    echo "   LÃ¼tfen BuildConfig veya local.properties kullanÄ±n."
    exit 1
fi

echo "âœ… TÃœM ANAYASAL KONTROLLER BAÅARILI. Commit onaylandÄ±."
exit 0
